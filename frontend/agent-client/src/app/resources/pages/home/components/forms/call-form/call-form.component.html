<ion-card>
  <ion-card-content>
    <form>
      <h1>Dados da solicitação</h1>

      <ion-row>
        <ion-col>
          <h2>Detalhes</h2>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="4">
          <ion-label>Serviço</ion-label>
          <ng-container *ngIf="!editDuty">
            <ion-input placeholder="{{ call.duty.description }}" readonly></ion-input>
          </ng-container>
          <ng-container *ngIf="editDuty">
            <select [(ngModel)]="tempDuty" 
                        (change)="checkDestination()" 
                        [ngModelOptions]="{standalone: true}">
              <option [ngValue]="tempDuty" selected>{{tempDuty.description}}</option>
              <option 
                  *ngFor="let duty of duties"
                  [ngValue]="duty">{{duty.description}}</option>
            </select>
          </ng-container>
          <div class="question-radio">
            <label>O serviço está corente com a descrição? </label>
            <input [(ngModel)]="editDuty" [value]="false" (change)="checkDestination()" type="radio" name="service-edition" checked> Sim
            <input [(ngModel)]="editDuty" [value]="true" (change)="checkDestination()" type="radio" name="service-edition"> Não
          </div>
        </ion-col>

        <ion-col size="3">
          <ion-label>Protocolo</ion-label>
          <ion-input placeholder="{{call.protocol}}" readonly></ion-input>
        </ion-col>

        <ion-col size="2">
          <ion-label>Data</ion-label>
          <ion-input placeholder="{{call.created_at | date:'HH:mm -- d/MM/yy'}}" readonly></ion-input>
        </ion-col>

        <ion-col size="3">
          <ion-label>Autor</ion-label>
          <ion-input placeholder="{{call.author.name}}" readonly></ion-input>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="5">
          <ion-label>Destinatário</ion-label>
          <ng-container *ngIf="!editDestination">
            <ion-input placeholder="{{call.destination.name}}" readonly></ion-input>
          </ng-container>
          <ng-container *ngIf="editDestination">
            <select [(ngModel)]="tempDestination"
                    [ngModelOptions]="{standalone: true}">
              <option [ngValue]="tempDestination" selected>{{tempDestination}}</option>
              <option *ngFor="let dept of deptList" [ngValue]="dept">{{dept}}</option>
            </select>
          </ng-container>
          <div class="question-radio">
            <label>O órgão destinatário condiz com a descrição? </label>
            <input [(ngModel)]="editDestination" [value]="false" type="radio" name="dept-edition" checked> Sim
            <input [(ngModel)]="editDestination" [value]="true" type="radio" name="dept-edition"> Não
          </div>
        </ion-col>

        <ion-col size="4">
          <ion-label>Status</ion-label>
          <ion-input placeholder="{{call.status}}" readonly></ion-input>
        </ion-col>
        <ion-col>
          <ion-label>&nbsp;</ion-label>
          <ion-button color="success">Ver Imagens</ion-button>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <h2>Endereço</h2>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="2">
          <ion-label>Cep</ion-label>
          <ion-input placeholder="{{call.address.zip_code}}" readonly></ion-input>
        </ion-col>
        <ion-col size="4">
          <ion-label>Bairro</ion-label>
          <ion-input placeholder="{{call.address.district.name}}" readonly></ion-input>
        </ion-col>
        <ion-col size="6">
          <ion-label>Logradouro</ion-label>
          <ion-input placeholder="{{call.address.public_place}}" readonly></ion-input>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <h2>Descrição</h2>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12">
          <ion-textarea placeholder="{{call.description}}" id="text-area" rows="5" readonly></ion-textarea>
          <div class="question-radio">
            <label>A ocorrência é um trote? </label>
            <input [(ngModel)]="isPrank" [value]="false" type="radio" name="prank"> Sim
            <input [(ngModel)]="isPrank" [value]="true" type="radio" name="prank" checked> Não
          </div>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="4" offset="8">
          <ng-container *ngIf="!editDestination && !isPrank">
            <ion-button (click)="answer()" color="tertiary">Adicionar Resposta</ion-button>
          </ng-container>
          <ng-container *ngIf="editDestination && !isPrank">
            <ion-button (click)="forward()" color="tertiary">Encaminhar</ion-button>
          </ng-container>
          <ng-container *ngIf="isPrank">
            <ion-button (click)="delete()" color="danger">Excluir Trote</ion-button>
          </ng-container>
        </ion-col>
      </ion-row>
    </form>
  </ion-card-content>
</ion-card>