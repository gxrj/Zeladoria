<ion-card>
  <ion-card-content>
    <form *ngIf="attendances?.length">
      <h1>Atendimentos</h1>
      <ng-container>
        <data-table [headerTitles]="attendanceHeaders">
          <tr *ngFor="let attendance of attendances">
            <td>{{ attendance.type }}</td>
            <td>{{ attendance.protocol }}</td>
            <td>{{ attendance.responsible.name }}</td>
            <td>{{ attendance.issued_at | date:"dd/MM/y" }}</td>
            <td>
              <ion-badge (click)="openModal( attendance )" 
                         color="success">Abrir</ion-badge>
            </td>
          </tr>
        </data-table>
      </ng-container>
    </form>
    <form>
      <h1>Dados da solicitação</h1>

      <ion-row>
        <ion-col sizeXs="12" sizeMd="6" sizeLg="4" sizeXl="3">
          <ion-label>Destinatário</ion-label>
          <ion-input placeholder="{{call.destination.name}}" readonly></ion-input>
        </ion-col>
        <ion-col sizeXs="12" sizeMd="6" sizeLg="4" sizeXl="3">
          <ion-label>Serviço</ion-label>
          <ion-input placeholder="{{ call.duty.description }}" readonly></ion-input>
        </ion-col>

        <ion-col sizeXs="12" sizeMd="6" sizeLg="4" sizeXl="2">
          <ion-label>Protocolo</ion-label>
          <ion-input placeholder="{{call.protocol}}" readonly></ion-input>
        </ion-col>

        <ion-col sizeXs="6" sizeLg="4" sizeXl="1">
          <ion-label>Dia</ion-label>
          <ion-input placeholder="{{call.created_at | date:'d/MM/yy'}}" readonly></ion-input>
        </ion-col>
        <ion-col sizeXs="6" sizeLg="4" sizeXl="1">
          <ion-label>Hora</ion-label>
          <ion-input placeholder="{{call.created_at | date:'HH:mm'}}" readonly></ion-input>
        </ion-col>
        <ion-col sizeXs="12" sizeMd="6" sizeXl="2">
          <ion-label>Status</ion-label>
          <ion-input placeholder="{{call.status}}" readonly></ion-input>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12">
          <h2>Descrição</h2>
          <ion-textarea placeholder="{{call.description}}" id="text-area" rows="5" readonly></ion-textarea>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12">
          <h2>Endereço</h2>
        </ion-col>
        <ion-col sizeXs="12" sizeMd="6" sizeLg="2">
          <ion-label>Cep</ion-label>
          <ion-input placeholder="{{call.address.zip_code}}" readonly></ion-input>
        </ion-col>
        <ion-col sizeXs="12" sizeMd="6" sizeLg="4">
          <ion-label>Bairro</ion-label>
          <ion-input placeholder="{{call.address.district.name}}" readonly></ion-input>
        </ion-col>
        <ion-col sizeXs="12" sizeLg="6">
          <ion-label>Logradouro</ion-label>
          <ion-input placeholder="{{call.address.public_place}}" readonly></ion-input>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12">
          <h2>Detalhes</h2>
        </ion-col>
        <ion-col  sizeXs="12" sizeXl="4">
          <ion-label>Imagens Anexadas</ion-label>
          <ng-container *ngIf="displayFiles">
            <data-table [headerTitles]="imageHeaders">
              <tr *ngFor="let imgName of call.images">
                <td>{{ imgName }}</td>
                <td>
                  <ion-badge (click)="renderFile( imgName )" color="success">Ver</ion-badge>
                </td>
              </tr>
            </data-table>
          </ng-container>
          <ion-input *ngIf="!displayFiles" placeholder="Não há anexos"></ion-input>
        </ion-col>

        <ion-col sizeXs="12" sizeMd="6" sizeXl="4">
          <ion-label>Nome do Autor</ion-label>
          <ion-input placeholder="{{call.author.name}}" readonly></ion-input>
        </ion-col>
        <ion-col sizeXs="12" sizeMd="6" sizeXl="4">
          <ion-label>E-mail do Autor</ion-label>
          <ion-input placeholder="{{call.author.email}}" readonly></ion-input>
        </ion-col>
      </ion-row>

    </form>
  </ion-card-content>
</ion-card>